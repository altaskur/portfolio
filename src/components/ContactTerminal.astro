---
---

<!-- Floating Terminal Toggle / Container -->
<div class="fixed bottom-4 right-4 z-40 flex flex-col items-end">
    <!-- Terminal Window (Hidden by default or minimized state management could be here) -->
    <div id="terminal-window" class="mb-4 w-[90vw] max-w-lg overflow-hidden rounded-xl border border-gray-800 bg-[#0c0c0c] shadow-2xl transition-all md:w-[500px]">
        <!-- Terminal Header -->
        <div class="flex items-center justify-between border-b border-gray-800 bg-gray-900 px-4 py-2 cursor-pointer" id="terminal-header">
            <div class="flex items-center gap-2">
                <div class="flex gap-2">
                    <div class="h-3 w-3 rounded-full bg-red-500 hover:bg-red-600 transition-colors" id="close-btn"></div>
                    <div class="h-3 w-3 rounded-full bg-yellow-500"></div>
                    <div class="h-3 w-3 rounded-full bg-green-500"></div>
                </div>
                <div class="ml-4 font-mono text-xs text-gray-500 md:text-sm">altaskur@portfolio:~/contact</div>
            </div>
             <button id="minimize-btn" class="text-gray-500 hover:text-white">_</button>
        </div>

        <!-- Terminal Body -->
        <div class="h-[300px] overflow-y-auto p-4 font-mono text-sm text-gray-300 md:text-base" id="terminal-body" data-lenis-prevent>
            <div class="mb-4">
                <p class="text-green-500">Welcome to the Altaskur Contact Interface v1.0.0</p>
                <p>Type <span class="text-accent font-bold">'help'</span> to see available commands.</p>
            </div>
            
            <div id="output"></div>

            <div class="flex items-center gap-2 mt-2">
                <span class="text-accent">âžœ</span>
                <span class="text-blue-500">~</span>
                <input type="text" id="command-input" class="w-full bg-transparent outline-none border-none text-white placeholder-gray-700" placeholder="Type a command..." autocomplete="off">
            </div>
        </div>
    </div>

    <!-- Floating Toggle Button -->
    <button id="terminal-toggle" class="group flex h-14 w-14 items-center justify-center rounded-full bg-gray-900 border border-gray-700 text-accent shadow-lg transition-all hover:scale-110 hover:border-accent hover:shadow-accent/20 animate-pulse-border">
        <span class="font-mono text-2xl font-bold animate-blink">_</span>
    </button>
</div>

<style>
    @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
    }
    .animate-blink {
        animation: blink 1s step-end infinite;
    }
    .animate-pulse-border {
        animation: border-pulse 2s infinite;
    }
    @keyframes border-pulse {
        0% { border-color: rgba(55, 65, 81, 1); box-shadow: 0 0 0 0 rgba(0, 0, 0, 0); }
        50% { border-color: var(--accent); box-shadow: 0 0 10px rgba(0, 255, 179, 0.2); } /* Assuming accent is roughly this color, using var if possible but fallback needed in keyframes usually unless defined globally */
        100% { border-color: rgba(55, 65, 81, 1); box-shadow: 0 0 0 0 rgba(0, 0, 0, 0); }
    }
</style>

<script>
    const toggleBtn = document.getElementById('terminal-toggle');
    const windowEl = document.getElementById('terminal-window');
    const closeBtn = document.getElementById('close-btn');
    const minBtn = document.getElementById('minimize-btn');
    const input = document.getElementById('command-input') as HTMLInputElement;
    const output = document.getElementById('output');
    const body = document.getElementById('terminal-body');

    let isOpen = true;

    function toggleTerminal() {
        isOpen = !isOpen;
        if (isOpen) {
            windowEl?.classList.remove('hidden');
            setTimeout(() => input?.focus(), 100);
        } else {
            windowEl?.classList.add('hidden');
        }
    }

    toggleBtn?.addEventListener('click', toggleTerminal);
    closeBtn?.addEventListener('click', toggleTerminal);
    minBtn?.addEventListener('click', toggleTerminal);

    const commands = {
        help: () => `
            <div class="grid grid-cols-[100px_1fr] gap-2 my-2">
                <span class="text-accent">about</span> <span>Sobre mÃ­</span>
                <span class="text-accent">stack</span> <span>TecnologÃ­as</span>
                <span class="text-accent">social</span> <span>Redes Sociales</span>
                <span class="text-accent">email</span> <span>Contacto</span>
                <span class="text-accent">clear</span> <span>Limpiar</span>
            </div>
        `,
        about: () => `
            <div class="my-2 space-y-2">
                <p>ðŸ‘‹ Hola, soy Altaskur.</p>
                <p>Trabajo como desarrollador frontend, construyendo productos sÃ³lidos y con sentido.</p>
                <p>Me implico tanto en el cÃ³digo como en el contexto: entender el problema, hablar con el equipo y dejar el terreno preparado para evolucionar.</p>
            </div>
        `,
        stack: () => `
            <div class="my-2 grid grid-cols-2 gap-x-4 gap-y-1">
                <span class="text-accent">Frontend:</span> <span>Angular, React, TypeScript, CSS</span>
                <span class="text-accent">Desktop:</span> <span>Electron</span>
                <span class="text-accent">Backend:</span> <span>Node.js, Express</span>
                <span class="text-accent">Tools:</span> <span>GitHub Actions, SonarQube, Git, Figma</span>
            </div>
        `,
        social: () => `
            <div class="my-2 flex flex-col gap-1">
                <a href="https://github.com/altaskur" target="_blank" class="hover:underline hover:text-white">GitHub</a>
                <a href="https://www.linkedin.com/in/isaac-juli%C3%A1n/" target="_blank" class="hover:underline hover:text-white">LinkedIn</a>
                <a href="https://dev.to/altaskur" target="_blank" class="hover:underline hover:text-white">Dev.to</a>
                <a href="https://www.twitch.tv/altaskur" target="_blank" class="hover:underline hover:text-white">Twitch</a>
                <a href="https://bsky.app/profile/altaskur.live" target="_blank" class="hover:underline hover:text-white">BlueSky</a>
            </div>
        `,
        email: () => `<p class="my-2">Contact me at: <a href="mailto:contact@altaskur.dev" class="text-accent hover:underline">contact@altaskur.dev</a></p>`,
        clear: () => {
            if (output) output.innerHTML = '';
            return '';
        }
    };

    input?.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            const cmd = input.value.trim().toLowerCase();
            if (!cmd) return;

            // Add command to history
            const cmdLine = document.createElement('div');
            cmdLine.innerHTML = `<span class="text-accent">âžœ</span> <span class="text-blue-500">~</span> <span class="text-white">${cmd}</span>`;
            output?.appendChild(cmdLine);

            // Process command
            let response = `<p class="text-red-500 my-1">Command not found: ${cmd}. Type 'help' for options.</p>`;
            
            if (cmd in commands) {
                // @ts-ignore
                response = commands[cmd]();
            } else if (cmd.startsWith('contact')) {
                 // Easter egg for 'contact --topic'
                 response = `<p class="my-2 text-yellow-500">Initiating protocol... Just kidding, send me an email!</p>`;
            }

            if (response) {
                const respDiv = document.createElement('div');
                respDiv.innerHTML = response;
                output?.appendChild(respDiv);
            }

            input.value = '';
            // Scroll to bottom
            if(body) body.scrollTop = body.scrollHeight;
        }
    });

    // Auto-focus input when clicking terminal body
    body?.addEventListener('click', () => input?.focus());
</script>
