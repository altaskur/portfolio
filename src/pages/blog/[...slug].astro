---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const posts = await getCollection('lab');
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={`${post.data.title} | Altaskur`}>
    <main class="min-h-screen px-4 py-20 md:px-10 max-w-4xl mx-auto">
        <a href="../blog" class="inline-flex items-center gap-2 text-sm text-gray-500 hover:text-white mb-10 font-mono">
            &lt;- BACK_TO_LAB
        </a>

        <article class="prose prose-invert prose-lg max-w-none">
            <header class="mb-10 not-prose border-b border-gray-800 pb-10">
                <div class="flex items-center gap-4 text-sm font-mono text-accent mb-4">
                    <span>{post.data.publishDate.toLocaleDateString()}</span>
                    <span>///</span>
                    <span class="uppercase">{post.data.type}</span>
                </div>
                <h1 class="text-4xl md:text-5xl font-bold text-white mb-6">{post.data.title}</h1>
                <p class="text-xl text-gray-400 leading-relaxed">{post.data.description}</p>
            </header>
            
            <Content />
        </article>
    </main>
</Layout>
